<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Forgot Password – Trader Route</title>
<link rel="stylesheet" href="style.css">
<style>
:root { --green:#008b6a; --green-dark:#006b52; --bg:#f6f8fa; }
body{font-family:"Inter","Segoe UI",Arial,sans-serif;background:var(--bg);margin:0;color:#222;}
.reset-container{
  max-width:420px;margin:80px auto;background:#fff;padding:40px 35px;
  border-radius:12px;box-shadow:0 3px 10px rgba(0,0,0,0.08);text-align:center;
}
h1{color:var(--green);margin-top:0;}
input{
  width:100%;padding:12px 14px;border:1px solid #ccc;border-radius:8px;
  font-size:15px;margin-top:10px;
}
button{
  width:100%;margin-top:15px;background:var(--green);color:#fff;border:none;
  padding:12px;border-radius:8px;font-weight:600;font-size:16px;cursor:pointer;
}
button:hover{background:var(--green-dark);}
.status{margin-top:15px;font-size:14px;min-height:20px;color:#555;}
</style>
</head>
<body>
<div class="reset-container">
  <h1>Reset Password</h1>
  <p>Enter your registered email. We’ll send you a reset link.</p>
  <input type="email" id="resetEmail" placeholder="Email" required>
  <button onclick="sendReset()">Send Reset Link</button>
  <div class="status" id="status"></div>
  <p style="margin-top:20px;"><a href="login.html" style="color:#008b6a;text-decoration:none;">Back to Login</a></p>
</div>

<script>
async function sendReset(){
  const email=document.getElementById('resetEmail').value.trim();
  const msg=document.getElementById('status');
  if(!email){msg.textContent='Please enter your email.';msg.style.color='red';return;}

  try{
    const users=JSON.parse(localStorage.getItem('tr_users')||'[]');
    const found=users.find(u=>u.email===email);
    if(!found){
      msg.textContent='Email not found in our system.';msg.style.color='red';
      return;
    }
    // Yeni geçici şifre oluştur:
    const newPass=Math.random().toString(36).slice(-8);
    found.password=newPass;
    localStorage.setItem('tr_users',JSON.stringify(users));

    // Basit sürüm: ekranda göster (mail entegrasyonu istenirse sonra ekleriz)
    msg.innerHTML=`✅ Temporary password generated:<br><strong>${newPass}</strong><br>Use it to login and then change your password.`;
    msg.style.color='green';
  }catch(e){
    msg.textContent='Server error. Please try again later.';msg.style.color='red';
  }
}
</script>
</body>
</html>
