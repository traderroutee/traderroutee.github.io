<!DOCTYPE html>
<html lang="en">
<head>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Trader Route ‚Äì Global Import & Export Platform for Buyers and Suppliers</title>
  <meta name="description" content="Connect with international buyers and suppliers worldwide. Join Trader Route, the global B2B import & export network.">
  <meta name="keywords" content="import, export, global trade, b2b, suppliers, buyers, trader route">
  <meta name="author" content="Trader Route Team">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://traderroute.com/">

  <!-- Extended Open Graph / Twitter Integration -->
<meta property="og:site_name" content="Trader Route">
<meta property="og:image" content="https://traderroute.com/assets/hero-map.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Trader Route ‚Äì Global Import & Export Platform">
<meta name="twitter:description" content="Connect with global buyers and suppliers. Create trade requests and expand your business with Trader Route.">
<meta name="twitter:image" content="https://traderroute.com/assets/hero-map.jpg">

  <!-- Social Media Preview (Open Graph) -->
  <meta property="og:title" content="Trader Route ‚Äì Global Import & Export Platform">
  <meta property="og:description" content="Join the world‚Äôs fastest-growing import & export B2B network.">
  <meta property="og:url" content="https://traderroute.com/">
  <meta property="og:type" content="website">

  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YVEKRWM5VB"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-YVEKRWM5VB', {
      'anonymize_ip': true,
      'send_page_view': true,
      'cookie_flags': 'SameSite=None;Secure'
    });
  </script>

  <!-- Favicon & Styles -->
  <link rel="icon" href="assets/logos.png" type="image/png">
  <link rel="preload" href="assets/ihracat-haritasi.png" as="image">
  <link rel="stylesheet" href="style.css">

  <!-- Structured Data for SEO (Schema.org) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "Trader Route",
  "url": "https://traderroute.com/",
  "logo": "https://traderroute.com/assets/logos.png",
  "sameAs": [
    "https://www.linkedin.com/company/traderroute",
    "https://twitter.com/traderroute",
    "https://facebook.com/traderroute"
  ],
  "description": "Trader Route is a global B2B import & export platform connecting international buyers and suppliers worldwide.",
  "founder": "Yunus",
  "foundingDate": "2023-01-01",
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "Customer Support",
    "email": "traderroutee@gmail.com",
    "availableLanguage": ["English"]
  },
  "address": {
    "@type": "PostalAddress",
    "addressCountry": "TR",
    "addressLocality": "Istanbul",
    "postalCode": "34000"
  }
}
</script>  
</head>


  <style>
    /* === GENERAL === */
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#f8f9fa}

    /* Header */
    header{background:#fff;padding:10px 40px;box-shadow:0 2px 8px rgba(0,0,0,.1);
           display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:1000}
    .logo-container{display:flex;align-items:center;gap:10px;cursor:pointer}
    .logo-container img{height:42px}
    .logo-text{font-size:15px;color:#555;font-weight:500}
    nav{display:flex;align-items:center;gap:15px;flex:1;justify-content:center}
    nav a{text-decoration:none;color:#000;font-weight:500;transition:.3s}
    nav a:hover{color:#007bff}
    .header-right{display:flex;align-items:center;gap:10px}
    .search-box{display:flex;align-items:center;background:#f1f1f1;border-radius:20px;padding:5px 10px}
    .search-box input{border:none;background:none;outline:none;padding:5px;font-size:14px;width:150px}

    /* Buttons */
    .login-btn,.join-btn{border:none;cursor:pointer;border-radius:6px;font-weight:500;transition:.3s}
    .login-btn{background:#f1f1f1;padding:7px 14px}
    .login-btn:hover{background:#e0e0e0}
    .join-btn{background:#008b6a;color:#fff;padding:8px 15px}
    .join-btn:hover{background:#006b52}

/* === HERO === */
.hero{
  position:relative;
  width:100vw; /* tam ekran geni≈ülik */
  height:470px; /* y√ºkseklik aynƒ± */
  background:url('assets/ihracat-haritasi.png') center center/115% no-repeat;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;

  /* ‚úÖ her iki kenarƒ± sƒ±fƒ±rlar */
  margin-left:calc(50% - 50vw);
  margin-right:calc(50% - 50vw);
  overflow:hidden;
}

.hero::after{
  content:"";
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.35);
  z-index:1;
  border-radius:6px;
}

.hero-content{
  position:relative;
  z-index:2;
  max-width:800px;
  color:#fff;
  text-align:center;
}

.hero-content h1{
  font-size:44px;
  font-weight:800;
  margin:0;
  text-shadow:0 3px 10px rgba(0,0,0,.5);
}

/* ‚úÖ yatay kayma veya scrollbar olu≈ümasƒ±n diye */
html, body{
  margin:0;
  padding:0;
  overflow-x:hidden;
}
    
    /* === CATEGORY BOX === */
    .categories{background:#fff;border-radius:10px;padding:15px;width:240px;
                box-shadow:0 4px 12px rgba(0,0,0,.1);z-index:5}
    .categories h3{font-size:16px;font-weight:700;margin-bottom:10px}
    .category-item{display:flex;justify-content:space-between;font-size:14px;margin:5px 0;color:#333;cursor:pointer;transition:.3s}
    .category-item:hover{color:#008b6a}
    .category-item span{font-size:12px;color:#888}
    .category-button{width:100%;background:#008b6a;border:none;color:#fff;padding:8px;border-radius:6px;font-weight:600;cursor:pointer;margin-top:8px}
    .category-button:hover{background:#006b52}

    /* === MIDDLE BUTTONS === */
    .middle-buttons{text-align:center;margin:40px 0}
    .middle-buttons button{background:#008b6a;color:#fff;border:none;padding:10px 18px;border-radius:25px;margin:5px;cursor:pointer;font-weight:600;transition:.3s}
    .middle-buttons button:hover{background:#006b52}

    /* === MAIN SECTION === */
    .main-section{background:#fff;padding:60px 40px;display:flex;justify-content:center;align-items:center;gap:40px;border-radius:10px;max-width:1100px;margin:40px auto;box-shadow:0 2px 6px rgba(0,0,0,.05)}
    .main-section img{width:300px;border-radius:10px}
    .main-section h2{font-size:24px;margin-bottom:10px;color:#000}
    .main-section p{color:#333;line-height:1.6;font-size:15px}
    .main-section button{background:#008b6a;border:none;color:#fff;padding:8px 16px;border-radius:5px;font-weight:600;cursor:pointer}
    .main-section button:hover{background:#006b52}

    /* FOOTER */
    footer{background:#fff;display:flex;justify-content:space-around;padding:40px;font-size:14px;color:#333;border-top:1px solid #ddd}
    footer div{width:200px}
    footer h4{font-size:15px;margin-bottom:10px;color:#000}
    .footer-bottom{text-align:center;background:#000;color:#fff;padding:10px;font-size:13px}

    /* === MOBILE === */
/* === Enhanced Latest Requests Table === */


.latest-requests h2 {
  color: #007b63;
  margin-bottom: 25px;
  font-size: 28px;
  font-weight: 800;
  letter-spacing: 0.5px;
}

.requests-table-wrapper {
  overflow-x: auto;
  max-width: 1150px;
  margin: 0 auto;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.05);
}

.requests-table {
  width: 100%;
  border-collapse: collapse;
  background: #ffffff;
  border-radius: 12px;
  overflow: hidden;
}

.requests-table th, .requests-table td {
  padding: 22px 24px;
  text-align: left;
  font-size: 15px;
  border-bottom: 1px solid #eee;
}

.requests-table th {
  background: #f1f6f5;
  color: #007b63;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.4px;
}

.requests-table tr:hover {
  background: #f9fdfc;
  transition: 0.25s;
}

.title-col { width: 60%; }  /* Title geni≈ü */
.title-cell {
  font-weight: 600;
  color: #008b6a;
  transition: color 0.3s;
}
.title-cell:hover { color: #005f46; }

.view-all {
  margin-top: 30px;
}

.view-all button {
  background: #008b6a;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 12px 30px;
  cursor: pointer;
  font-size: 16px;
  font-weight: 700;
  transition: all 0.3s ease;
  box-shadow: 0 3px 10px rgba(0,0,0,0.1);
}

.view-all button:hover {
  background: #006b52;
  transform: translateY(-2px);
}
/* === Country Flag Table Styling (for /assets/flag/ images) === */
.latest-requests {
  margin: 80px auto;
  text-align: center;
  max-width: 1250px;
}

.latest-requests h2 {
  color: #007b63;
  margin-bottom: 25px;
  font-size: 30px;
  font-weight: 800;
  letter-spacing: 0.6px;
}

.requests-table-wrapper {
  overflow-x: auto;
  max-width: 1250px;
  margin: 0 auto;
  border-radius: 14px;
  box-shadow: 0 4px 22px rgba(0,0,0,0.06);
}

.requests-table {
  width: 100%;
  border-collapse: collapse;
  background: #ffffff;
  border-radius: 14px;
  overflow: hidden;
}

.requests-table th, .requests-table td {
  padding: 26px 28px;
  text-align: left;
  font-size: 17px;      /* yazƒ± b√ºy√ºt√ºld√º */
  border-bottom: 1px solid #eee;
}

.requests-table th {
  background: #e8f5f3;
  color: #007b63;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 28px 24px 20px;   /* √ºstten biraz fazla, alttan biraz az bo≈üluk */
  text-align: left;
  vertical-align: middle;    /* tam ortalama */
  line-height: 1.4;
  font-size: 17px;
}

    .requests-table tr {
  vertical-align: middle;
}

.requests-table tr:hover {
  background: #f9fdfc;
  transition: 0.25s;
}

/* üè≥Ô∏è Bayrak G√∂rseli */
.flag-icon-img {
  width: 40px;          /* biraz daha b√ºy√ºk */
  height: 26px;
  border-radius: 4px;
  object-fit: cover;
  margin-right: 8px;
  vertical-align: middle;
  transform: translateY(2px); /* hizalamayƒ± a≈üaƒüƒ± alƒ±r */
  box-shadow: 0 0 4px rgba(0,0,0,0.25);
}
    .country-cell {
  display: flex;
  align-items: center;      /* dikeyde ortalar */
  gap: 8px;                 /* bayrak ile yazƒ± arasƒ± mesafe */
}

.title-col { width: 50%; }
.title-cell {
  font-weight: 600;
  color: #008b6a;
  transition: color 0.3s;
}
.title-cell:hover { color: #005f46; }

.view-all {
  margin-top: 30px;
}

.view-all button {
  background: #008b6a;
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 14px 35px;
  cursor: pointer;
  font-size: 17px;
  font-weight: 700;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.view-all button:hover {
  background: #006b52;
  transform: translateY(-2px);
}
  </style>
</head>
<body>
  <!-- Welcome alert (orijinal davranƒ±≈ü korunur) -->
  <script>
  window.addEventListener('DOMContentLoaded', ()=>{
    const name = localStorage.getItem('welcome_name');
    if(name){ alert(`Welcome, ${name}!`); localStorage.removeItem('welcome_name'); }
  });
  </script>

  <!-- ‚úÖ TEK HEADER -->
  <header>
    <!-- Sol: Logo (anasayfaya gider) -->
    <div class="logo-container" onclick="location.href='index.html'">
      <img src="assets/logos.png" alt="Trader Route Logo" loading="lazy">
      <span class="logo-text">The Silk Road of E-Commerce</span>
    </div>

    <!-- Orta: Men√º -->
    <nav>
      <a href="index.html">Home</a>
      <a href="companies.html">Companies</a>
      <a href="requests.html">Requests</a>
      <a href="contact.html">Contact</a>
      <a href="pricing.html">Pricing</a>
    </nav>

    <!-- Saƒü: Arama + Giri≈ü + Kullanƒ±cƒ± men√ºs√º -->
    <div class="header-right">
      <div class="search-box">
        <input type="text" placeholder="Search...">
           <button>üîç</button>
      </div>

        <!-- üì© Messages Button -->
<div id="messageIconContainer" style="position:relative;margin-left:15px;">
  <a href="messages.html" id="messageIconLink" style="text-decoration:none;color:inherit;">
    <img src="assets/email.png" alt="Messages" style="width:25px;height:25px;cursor:pointer;">
    <span id="messageBadge"
          style="position:absolute;top:-5px;right:-8px;
          background:red;color:white;font-size:11px;
          border-radius:50%;padding:2px 5px;display:none;">
    </span>
  </a>
</div>

      <button class="login-btn" onclick="location.href='login.html'">Sign In</button>
      <button class="join-btn" onclick="location.href='register.html'">Join Now</button>

      <img id="userIcon" src="assets/user-icon.png" alt="User Icon" 
     style="width:36px;height:36px;border-radius:50%;cursor:pointer;display:none;">
        <div id="userDropdown"
             style="display:none;position:absolute;right:0;top:45px;background:#fff;border:1px solid #ddd;border-radius:8px;
                    box-shadow:0 6px 18px rgba(0,0,0,.12);width:180px;z-index:999;overflow:hidden;">
          <a href="profile.html"  style="display:block;padding:10px 12px;color:#333;text-decoration:none;border-bottom:1px solid #eee;">Profile</a>
          <a href="messages.html" style="display:block;padding:10px 12px;color:#333;text-decoration:none;border-bottom:1px solid #eee;">Messages</a>
          <a href="#" onclick="logoutUser()" style="display:block;padding:10px 12px;color:#d9534f;text-decoration:none;">Logout</a>
        </div>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-content">
      <h1>Connecting the World of Import and Export </h1>
    </div>
  </section>

   <!-- MIDDLE BUTTONS -->
  <div class="middle-buttons">
    <button onclick="location.href='requests.html'">All Requests</button>
    <button onclick="location.href='requests.html?type=Buy'">Buyer Requests</button>
    <button onclick="location.href='requests.html?type=Sell'">Seller Offers</button>
    <button onclick="location.href='request-form.html'">Create Free Request</button>
  </div>

  <!-- üåç LATEST REQUESTS SECTION (auto flag integration, restored) -->
<section class="latest-requests">
  <div class="requests-table-wrapper">
    <table class="requests-table">
      <thead>
        <tr>
          <th>Country</th>
          <th class="title-col">Request Title</th>
          <th>Type</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody id="latestRequestsList">
        <!-- dynamic data loads here -->
      </tbody>
    </table>
  </div>
</section>


  <!-- CATEGORY BOX -->
  <section class="cat-holder">
    <div class="categories">
      <h3>Categories</h3>
      <div id="categoryList"></div>
      <button class="category-button" onclick="location.href='requests.html'">View All Categories</button>
    </div>
  </section>


<script>
document.addEventListener("DOMContentLoaded", async function () {
  const container = document.getElementById("latestRequestsList");
  if (!container) return;

  container.innerHTML = `<tr><td colspan="4" style="text-align:center;color:#777;padding:25px;">Loading...</td></tr>`;

  try {
    const resp = await fetch("https://divine-hill-9557.traderroutee.workers.dev/requests");
    if (!resp.ok) throw new Error("API connection failed: " + resp.status);
    const all = await resp.json();

    if (!Array.isArray(all) || all.length === 0) {
      container.innerHTML = `<tr><td colspan="4" style="text-align:center;color:#777;padding:25px;">No trade requests yet.</td></tr>`;
      return;
    }

    const today = new Date();
    const withDates = all.map(r => ({
      ...r,
      _dateObj: r.date ? new Date(r.date) : null,
      _premiumUntilObj: r.premiumUntil ? new Date(r.premiumUntil) : null
    }));

    const descByDate = (a, b) => (b._dateObj?.getTime() || 0) - (a._dateObj?.getTime() || 0);
    const premium = withDates
      .filter(r => r.isPremium && r._premiumUntilObj && r._premiumUntilObj >= today)
      .sort(descByDate);
    const normal = withDates
      .filter(r => !r.isPremium || !r._premiumUntilObj || r._premiumUntilObj < today)
      .sort(descByDate);

    const wrapper = container.closest("table").parentElement;
    let html = `
      <div style="width:95%;max-width:1250px;margin:0 auto;">
        <h2 style="text-align:center;color:#007157;margin-bottom:20px;">Latest Trade Requests</h2>
    `;

    // === Premium kutusu ===
    if (premium.length > 0) {
      html += `
      <div class="premium-box" style="background:#fffef7;border:1px solid #f1e08b;border-radius:12px;padding:18px 25px;margin-bottom:35px;box-shadow:0 0 10px rgba(0,0,0,0.05);">
        <h3 style="text-align:center;color:#007157;margin-bottom:15px;font-size:20px;">‚≠ê Premium Requests</h3>
        <table style="width:100%;border-collapse:collapse;font-size:17px;">
          <thead>
            <tr style="background:#f9f9f9;">
              <th style="text-align:left;padding:10px;">Country</th>
              <th style="text-align:left;padding:10px;">Request Title</th>
              <th style="text-align:left;padding:10px;">Type</th>
              <th style="text-align:left;padding:10px;">Date</th>
            </tr>
          </thead>
          <tbody>
      `;

      premium.slice(0, 5).forEach(req => {
        const id = encodeURIComponent(req.id || req.title || "");
        const country = req.country || "Unknown";
        const flagFile = (typeof getFlagURL === "function") ? getFlagURL(country, 40) : "assets/flag/default.png";
        const titleShort = (req.title || "Untitled").slice(0, 85);
        const dateStr = req._dateObj ? req._dateObj.toLocaleDateString() : "-";

        html += `
          <tr onclick="location.href='request-detail.html?id=${id}'" style="cursor:pointer;background-color:#fffbe6;border-bottom:1px solid #f2e0a5;">
            <td style="padding:10px;vertical-align:middle;white-space:nowrap;">
              <img src="${flagFile}" alt="${country}" class="flag-icon-img">
              <span style="font-weight:500;">${country}</span>
            </td>
            <td style="padding:10px;vertical-align:middle;">
              <div style="border-left:4px solid #FFD700;padding-left:10px;">
                ${titleShort}
                <span style="background:#FFD700;color:#000;padding:3px 7px;border-radius:5px;font-size:13px;font-weight:700;margin-left:6px;">‚≠ê Premium</span>
              </div>
            </td>
            <td style="padding:10px;vertical-align:middle;">${req.type || "-"}</td>
            <td style="padding:10px;vertical-align:middle;">${dateStr}</td>
          </tr>
        `;
      });

      html += `
          </tbody>
        </table>
        <div style="text-align:center;margin-top:15px;">
          <button onclick="window.location.href='premium.html'" 
            style="background:#007157;color:#fff;border:none;padding:12px 32px;border-radius:8px;font-weight:600;font-size:16px;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,0.15);transition:0.3s;">
            View All Premium Requests
          </button>
        </div>
      </div>`;
    }

    // === Normal ilanlar ===
    html += `
      <div style="background:#fff;border:1px solid #ddd;border-radius:12px;padding:18px 25px;box-shadow:0 0 8px rgba(0,0,0,0.05);">
        <table style="width:100%;border-collapse:collapse;font-size:17px;">
          <thead>
            <tr style="background:#f9f9f9;">
              <th style="text-align:left;padding:10px;">Country</th>
              <th style="text-align:left;padding:10px;">Request Title</th>
              <th style="text-align:left;padding:10px;">Type</th>
              <th style="text-align:left;padding:10px;">Date</th>
            </tr>
          </thead>
          <tbody>
    `;

    normal.slice(0, 10).forEach(req => {
      const id = encodeURIComponent(req.id || req.title || "");
      const country = req.country || "Unknown";
      const flagFile = (typeof getFlagURL === "function") ? getFlagURL(country, 40) : "assets/flag/default.png";
      const titleShort = (req.title || "Untitled").slice(0, 85);
      const dateStr = req._dateObj ? req._dateObj.toLocaleDateString() : "-";

      html += `
        <tr onclick="location.href='request-detail.html?id=${id}'" 
    style="cursor:pointer;border-bottom:1px solid #e5e5e5;background-color:#fff;">
          <td style="padding:10px;vertical-align:middle;white-space:nowrap;">
            <img src="${flagFile}" alt="${country}" class="flag-icon-img">
            <span style="font-weight:500;">${country}</span>
          </td>
          <td style="padding:10px;vertical-align:middle;">${titleShort}</td>
          <td style="padding:10px;vertical-align:middle;">${req.type || "-"}</td>
          <td style="padding:10px;vertical-align:middle;">${dateStr}</td>
        </tr>
      `;
    });

    html += `
          </tbody>
        </table>
        <div style="text-align:center;margin-top:20px;">
          <button onclick="window.location.href='all-requests.html'" 
            style="background:#007157;color:#fff;border:none;padding:12px 32px;border-radius:8px;font-weight:600;font-size:16px;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,0.15);transition:0.3s;">
            View All Requests
          </button>
        </div>
      </div>
    </div>
    `;

    wrapper.innerHTML = html;

  } catch (err) {
    console.error("Load requests error:", err);
    container.innerHTML = `<tr><td colspan="4" style="text-align:center;color:#d9534f;padding:25px;">Connection error ‚Äî unable to load requests.</td></tr>`;
  }
});
</script>


  
<!-- /LATEST REQUESTS SECTION -->
  <!-- MAIN SECTION -->
  <section class="main-section">
    <img src="assets/trader_route_step1.jpeg" alt="Trader Route Step" loading="lazy">
    <div>
      <h2>Join Trader Route</h2>
      <p>For companies aiming for global trade success; find buyers for your products and reach new markets ‚Äî with Trader Route.</p>
      <button onclick="location.href='register.html'">Join Now</button>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div><h4>Corporate</h4><p>Export Success Stories</p><p>About Us</p></div>
    <div><h4>Our Services</h4><p>Free Registration</p><p>Contact Buyers</p></div>
    <div><h4>Quick Links</h4><p>Company Directory</p><p>Buyer Guide</p></div>
  </footer>
  <div class="footer-bottom">¬© 2025 Trader Route ‚Äî Connecting Global Trade.</div>

  <!-- Kategoriler (orijinal JS korunur) -->
  <script>
    const categories = [
      "Agriculture Machinery","Agriculture Industry","Automotive","Baby Products & Accessories",
      "Chemical Industry","Fashion & Apparel","Commercial Activities","Construction & Building",
      "Cosmetics","IT & Communication","Defense Industry","Electrical & Electronics",
      "Energy Sector","Entertainment & Hobbies","Environment & Recycling","Food Industry",
      "Forestry Products","Furniture","Gifts & Promotion","HVAC Systems","Hospitality & Tourism",
      "Livestock","Industrial Products","Jewelry","Kitchenware & Glass","Leather & Footwear",
      "Machinery Industry","Marble & Mining","Marine Equipment","Medical & Pharmaceutical",
      "Metals & Steel","Packaging & Printing","Plastics & Rubber","Cleaning Products",
      "Security Equipment","Services","Sports Equipment","Stationery & Office","Textile Products",
      "Tourism","Home Appliances"
    ];
    const list = document.getElementById("categoryList");

async function loadCategories() {
  try {
    const response = await fetch("https://divine-hill-9557.traderroutee.workers.dev/requests");
    const all = await response.json();

    categories.slice(0, 10).forEach(cat => {
      const count = all.filter(r => r.category === cat).length;
      const div = document.createElement("div");
      div.className = "category-item";
      div.innerHTML = `<span>${cat}</span><span>(${count})</span>`;
      div.onclick = () => window.location.href = `requests.html?category=${encodeURIComponent(cat)}`;
      list.appendChild(div);
    });
  } catch (e) {
    console.error("Category load error:", e);
  }
}
loadCategories();

    (function(){
      const hero = document.querySelector('.hero');
      const holder = document.querySelector('.cat-holder');
      function placeBox(){
        if(!hero || !holder) return;
        if (window.innerWidth <= 900){
          holder.style.position = 'static';
          holder.style.transform = 'none';
          holder.style.left = '';
          holder.style.top = '';
          return;
        }
        const rect = hero.getBoundingClientRect();
        const scrollY = window.scrollY || document.documentElement.scrollTop;
        const scrollX = window.scrollX || document.documentElement.scrollLeft;
        const top = rect.top + scrollY + rect.height / 2;
        const left = rect.left + scrollX + Math.max(rect.width * 0.06, 32);
        holder.style.position = 'absolute';
        holder.style.top = `${top}px`;
        holder.style.left = `${left}px`;
        holder.style.transform = 'translateY(-50%)';
        holder.style.zIndex = '5';
        holder.style.marginTop = '0';
      }
      placeBox();
      window.addEventListener('resize', placeBox);
      window.addEventListener('scroll', placeBox);
    })();
  </script>

  

  <!-- üë§ Kullanƒ±cƒ± men√ºs√º kontrol√º (non-destructive) -->
  <script>
  (function(){
    const header   = document.querySelector('header');
    const icon     = document.getElementById('userIcon');
    const dropdown = document.getElementById('userDropdown');
    const loginBtn = header?.querySelector("button[onclick*='login.html']");
    const joinBtn  = header?.querySelector("button[onclick*='register.html']");
    const currentUser = JSON.parse(localStorage.getItem('tr_user') || 'null');

    if (currentUser) {
      if (icon) icon.style.display = 'inline-block';
      if (loginBtn) loginBtn.style.display = 'none';
      if (joinBtn)  joinBtn.style.display  = 'none';
    } else {
      if (icon) icon.style.display = 'none';
      if (loginBtn) loginBtn.style.display = '';
      if (joinBtn)  joinBtn.style.display  = '';
    }

    icon?.addEventListener('click', (e)=>{
      e.stopPropagation();
      dropdown.style.display = (dropdown.style.display === 'block') ? 'none' : 'block';
    });
    document.addEventListener('click', (e)=>{
      if (!e.target.closest('#userDropdown') && e.target.id !== 'userIcon')
  dropdown.style.display = 'none';
    });

    window.logoutUser = function(){
      localStorage.removeItem('tr_user');
      location.href = 'index.html';
    };
  })();
  </script>

   <script src="assets/flag.js"></script>

<footer style="margin-top:40px; padding:20px; text-align:center; font-size:13px; color:#777;">
  <p>&copy; 2025 Trader Route. All rights reserved. |
    <a href="privacy.html" style="color:#777; text-decoration:underline;">Privacy Policy</a>
  </p>
</footer>
<script>
// === Mesaj bildirimi kontrol√º ===
(function(){
  const badge = document.getElementById("messageBadge");
  const user = JSON.parse(localStorage.getItem("tr_user") || "null");
  if(!user || !badge) return;

  // T√ºm mesajlarƒ± localStorage‚Äôdan al
  const allMessages = JSON.parse(localStorage.getItem("tr_messages") || "[]");

  // Kullanƒ±cƒ±ya ait okunmamƒ±≈ü mesajlarƒ± filtrele
  const unread = allMessages.filter(m => m.to === user.email && !m.read);

  // Sayƒ± > 0 ise g√∂ster
  if(unread.length > 0){
    badge.textContent = unread.length;
    badge.style.display = "inline-block";
  } else {
    badge.style.display = "none";
  }
})();

  
</script>

</body>
</html>
